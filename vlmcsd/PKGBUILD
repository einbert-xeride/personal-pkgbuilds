pkgname=vlmcsd
pkgver=svn1112
pkgrel=1
pkgdesc="KMS activation using vlmcs."
arch=('x86_64')
license=('unknown')
depends=('glibc')
source=("${pkgname}-${pkgver}.tar.gz" 'vlmcsd.service')
sha256sums=("93e53d5162d62d27f8a266393482e717fbac4b0fd2b7e80444ed195dc57fe08c"
            "dd737d97a3617ee70e8abd665e477057161c0c6ca7bed4b3332ac42bb595d812")

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  install -Dm 755 bin/vlmcsd ${pkgdir}/usr/bin/vlmcsd
  install -Dm 755 bin/vlmcs ${pkgdir}/usr/bin/vlmcs

  install -Dm 644 etc/vlmcsd.ini ${pkgdir}/etc/vlmcsd.ini
  install -Dm 644 etc/vlmcsd.kmd ${pkgdir}/etc/vlmcsd.kmd

  install -Dm 644 man/vlmcs.1 "${pkgdir}/usr/share/man/man1/vlmcs.1"
  install -Dm 644 man/vlmcsd.7 "${pkgdir}/usr/share/man/man7/vlmcsd.7"
  install -Dm 644 man/vlmcsd.8 "${pkgdir}/usr/share/man/man8/vlmcsd.8"
  install -Dm 644 man/vlmcsd.ini.5 "${pkgdir}/usr/share/man/man5/vlmcsd.ini.5"
  install -Dm 644 man/vlmcsd-floppy.7 "${pkgdir}/usr/share/man/man7/vlmcsd-floppy.7"
  install -Dm 644 man/vlmcsdmulti.1 "${pkgdir}/usr/share/man/man1/vlmcsdmulti.1"

  # Create vlmcsd service
  install -Dm 644 ${srcdir}/vlmcsd.service ${pkgdir}/usr/lib/systemd/system/vlmcsd.service
}
